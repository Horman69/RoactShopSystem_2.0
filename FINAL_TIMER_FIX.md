# üîß –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –¢–ê–ô–ú–ï–†–û–ú - –ó–ê–í–ï–†–®–ï–ù–û

## üö® –ü–†–û–ë–õ–ï–ú–´, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –†–ï–®–ï–ù–´

### 1. **–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è**
- **–ü—Ä–æ–±–ª–µ–º–∞**: `attempt to call missing method 'playCooldownFinishedSound'`
- **–ü—Ä–∏—á–∏–Ω–∞**: –í—ã–∑–æ–≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ SimpleSoundService
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `playCooldownFinishedSound()`

### 2. **–ó–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥–µ**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª "1" –∏ –Ω–µ —É–º–µ–Ω—å—à–∞–ª—Å—è –¥–∞–ª—å—à–µ
- **–ü—Ä–∏—á–∏–Ω–∞**: `math.ceil()` –æ–∫—Ä—É–≥–ª—è–ª –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ 1
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –Ω–∞ `math.floor(cooldownTime + 0.99)`

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞ –≤ UI**
- **–ü—Ä–æ–±–ª–µ–º–∞**: UI –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º—è –∫—É–ª–¥–∞—É–Ω–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∞–∫—Ç–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- **–ü—Ä–∏—á–∏–Ω–∞**: –°–º–µ—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –∫—É–ª–¥–∞—É–Ω–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã `getUITimeLeft()` –∏ `isAbilityUnavailableForUI()`

## ‚úÖ –í–ù–ï–°–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **AbilityService.luau - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è UI**
```lua
-- –ü–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI (–≤–∫–ª—é—á–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç + –∫—É–ª–¥–∞—É–Ω)
function AbilityService:getUITimeLeft(player: Player, abilityId: string): number
    local activeEffect = playerState.activeEffects[abilityId]
    if activeEffect then
        -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞
        local effectTimeLeft = (activeEffect.startTime + activeEffect.duration) - currentTime
        if effectTimeLeft > 0 then
            return effectTimeLeft
        end
    end
    
    -- –ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω—ã–π –∫—É–ª–¥–∞—É–Ω
    return self:getCooldownTimeLeft(player, abilityId)
end

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–æ–ª–∂–Ω–∞ –ª–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –≤ UI
function AbilityService:isAbilityUnavailableForUI(player: Player, abilityId: string): boolean
    return self:getUITimeLeft(player, abilityId) > 0
end
```

### 2. **AbilityPanel.luau - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

#### –ê) –£–±—Ä–∞–Ω—ã –≤—ã–∑–æ–≤—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤:
```lua
-- –£–ë–†–ê–ù–û:
-- self.soundService:playCooldownFinishedSound()

-- –û–°–¢–ê–í–õ–ï–ù–û:
print("AbilityPanel: –ö—É–ª–¥–∞—É–Ω —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏", abilityId, "–∑–∞–∫–æ–Ω—á–∏–ª—Å—è!")
```

#### –ë) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è UI:
```lua
-- –°–¢–ê–†–´–ô –ö–û–î:
local isOnCooldown = self.abilityService:isAbilityOnCooldown(player, abilityId)
cooldownTimes[abilityId] = self.abilityService:getCooldownTimeLeft(player, abilityId)

-- –ù–û–í–´–ô –ö–û–î:
local isOnCooldown = self.abilityService:isAbilityUnavailableForUI(player, abilityId)
cooldownTimes[abilityId] = self.abilityService:getUITimeLeft(player, abilityId)
```

#### –í) –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏:
```lua
-- –°–¢–ê–†–´–ô –ö–û–î (–ü–†–û–ë–õ–ï–ú–ù–´–ô):
Text = tostring(math.ceil(cooldownTime)) -- –û–∫—Ä—É–≥–ª—è–ª 0.1 –¥–æ 1

-- –ù–û–í–´–ô –ö–û–î (–ü–†–ê–í–ò–õ–¨–ù–´–ô):
Text = cooldownTime > 0 and tostring(math.floor(cooldownTime + 0.99)) or "0"
```

### 3. **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞)**
- ‚úÖ –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ —Å–ª–µ–≤–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –ü–æ–¥–Ω—è—Ç–∞—è –ø–∞–Ω–µ–ª—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (0.3 –≤–º–µ—Å—Ç–æ 0.5)

## üéØ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ù–û–í–û–ô –§–û–†–ú–£–õ–´

### –°—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–ü–†–û–ë–õ–ï–ú–ù–ê–Ø):
```lua
math.ceil(0.1) = 1  -- –ü–æ–∫–∞–∑—ã–≤–∞–ª "1" –ø—Ä–∏ 0.1 —Å–µ–∫—É–Ω–¥—ã
math.ceil(0.9) = 1  -- –ü–æ–∫–∞–∑—ã–≤–∞–ª "1" –ø—Ä–∏ 0.9 —Å–µ–∫—É–Ω–¥—ã  
math.ceil(1.1) = 2  -- –ü–æ–∫–∞–∑—ã–≤–∞–ª "2" –ø—Ä–∏ 1.1 —Å–µ–∫—É–Ω–¥—ã
```

### –ù–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–ü–†–ê–í–ò–õ–¨–ù–ê–Ø):
```lua
math.floor(0.1 + 0.99) = math.floor(1.09) = 1  -- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "1"
math.floor(0.9 + 0.99) = math.floor(1.89) = 1  -- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "1"
math.floor(1.1 + 0.99) = math.floor(2.09) = 2  -- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "2"
math.floor(0.01 + 0.99) = math.floor(1.00) = 1 -- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "1"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –¢–∞–π–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π —Å–µ–∫—É–Ω–¥–æ–π –∏ **–ù–ï –ó–ê–°–¢–†–ï–í–ê–ï–¢**.

## üì± –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è
- ‚ùå –¢–∞–π–º–µ—Ä –∑–∞—Å—Ç—Ä–µ–≤–∞–ª –Ω–∞ "1" —Å–µ–∫—É–Ω–¥–µ
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞
- ‚ùå –°–º–µ—à–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –∫—É–ª–¥–∞—É–Ω–æ–≤

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
- ‚úÖ **–¢–∞–π–º–µ—Ä –ø–ª–∞–≤–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è** –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ 0
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞** –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ UI
- ‚úÖ **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –∫—É–ª–¥–∞—É–Ω–æ–≤
- ‚úÖ **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üöÄ –ì–û–¢–û–í–û –ö –§–ò–ù–ê–õ–¨–ù–û–ú–£ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫:
1. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
2. ‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–º—É –∞—É–¥–∏—Ç—É
3. ‚úÖ –ü—É—à—É –≤ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É GitHub

---
*–î–∞—Ç–∞: 5 –∏—é–ª—è 2025*  
*–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Ç–∞–π–º–µ—Ä–æ–º*
