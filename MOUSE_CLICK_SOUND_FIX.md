# MOUSE CLICK SOUND FIX - ИСПРАВЛЕНИЕ ЗВУКОВ ПРИ КЛИКАХ МЫШИ

## Проблема
Звук ошибки кулдауна воспроизводился только при нажатии горячих клавиш (Q/E/R), но не при клике мышкой на кнопки способностей.

## Причина
- Кнопки способностей имели условие `if not isOnCooldown then` в обработчике кликов
- Пустые слоты (некупленные способности) были созданы как `Frame` вместо `TextButton`
- Отсутствовал прямой доступ к `SoundService` в `AbilityPanel`

## Решение

### 1. Исправлены обработчики кликов
**До:**
```lua
[Roact.Event.Activated] = function()
    if not isOnCooldown then
        self:onAbilityActivate(ability.id)
    end
end,
```

**После:**
```lua
[Roact.Event.Activated] = function()
    -- Всегда вызываем onAbilityActivate - звук и уведомления обработаются внутри
    self:onAbilityActivate(ability.id)
end,
```

### 2. Пустые слоты стали кликабельными
Изменено с `Frame` на `TextButton` для некупленных способностей:
```lua
return Roact.createElement("TextButton", {
    -- ...
    [Roact.Event.Activated] = function()
        self:onAbilityActivate(slot.abilityId)
    end,
})
```

### 3. Добавлен SoundService в AbilityPanel
```lua
function AbilityPanel:init()
    self.abilityService = AbilityService.new()
    self.soundService = SoundService.new() -- Добавлено
    -- ...
end
```

### 4. Оптимизирован onAbilityActivate
- Убраны избыточные console.log сообщения
- Добавлен прямой вызов звука ошибки при неудачной активации
- Улучшены уведомления для пользователя

## Результат
Теперь звук ошибки кулдауна воспроизводится при:
- ✅ **Горячих клавишах** (Q/E/R) - как было
- ✅ **Клике мыши** на купленную способность на кулдауне - **исправлено**
- ✅ **Клике мыши** на некупленную способность - **добавлено**

## Пользовательский опыт

**Сценарии:**
1. **Клик на готовую способность** → звук активации + эффект
2. **Клик на способность в кулдауне** → звук ошибки + уведомление с таймером
3. **Клик на некупленную способность** → звук ошибки + предложение купить
4. **Горячие клавиши** → работают как прежде

## Файлы изменены
- `src/App/AbilityPanel.luau` - исправлены обработчики кликов, добавлен SoundService, оптимизирован код

Теперь звуковая обратная связь работает одинаково для всех способов взаимодействия с кнопками способностей!
