--!strict
-- src/client/ShopApp.client.luau
-- –û–¢–ö–õ–Æ–ß–ï–ù - –ó–∞–ø—É—Å–∫ –º–∞–≥–∞–∑–∏–Ω–∞ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
-- –¢–µ–ø–µ—Ä—å –º–∞–≥–∞–∑–∏–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ MainLauncher.client.luau

--[[
–≠–¢–û–¢ –§–ê–ô–õ –û–¢–ö–õ–Æ–ß–ï–ù!
–ú–∞–≥–∞–∑–∏–Ω —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ MainLauncher.client.luau

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –º–∞–≥–∞–∑–∏–Ω–∞, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ:
]]

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

print("‚ÑπÔ∏è ShopApp.client.luau –æ—Ç–∫–ª—é—á–µ–Ω.")
print("üöÄ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MainLauncher.client.luau –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞")
print("üõí –ò–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞")

--[[
-- –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ ModuleLoader
local ModuleLoader = require(ReplicatedStorage:WaitForChild("shared"):WaitForChild("ModuleLoader"))

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ UI, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
local function cleanupOldUI()
	local oldUIs = {"MainApp", "TestScreenGui", "ShopApp"}
	for _, uiName in ipairs(oldUIs) do
		local oldUI = playerGui:FindFirstChild(uiName)
		if oldUI then
			oldUI:Destroy()
		end
	end
end

-- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
local function startApp()
	local success, errorMessage = pcall(function()
		-- –ó–∞–≥—Ä—É–∂–∞–µ–º Roact –∏ –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
		local Roact = ModuleLoader.require("Packages/roact")
		local AppController = ModuleLoader.require("App/AppController")
		
		-- –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ UI
		cleanupOldUI()
		
		-- –ú–æ–Ω—Ç–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
		Roact.mount(Roact.createElement(AppController), playerGui, "ShopApp")
		
		print("‚úÖ –ú–∞–≥–∞–∑–∏–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!")
	end)
	
	if not success then
		warn("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞:", errorMessage)
		
		-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
		local errorGui = Instance.new("ScreenGui")
		errorGui.Name = "ShopError"
		errorGui.Parent = playerGui
		
		local errorFrame = Instance.new("Frame")
		errorFrame.Size = UDim2.new(0, 400, 0, 100)
		errorFrame.Position = UDim2.new(0.5, -200, 0.5, -50)
		errorFrame.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
		errorFrame.Parent = errorGui
		
		local errorText = Instance.new("TextLabel")
		errorText.Text = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞!\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞."
		errorText.Size = UDim2.new(1, 0, 1, 0)
		errorText.BackgroundTransparency = 1
		errorText.TextColor3 = Color3.fromRGB(255, 255, 255)
		errorText.TextSize = 18
		errorText.Font = Enum.Font.Gotham
		errorText.Parent = errorFrame
	end
end

-- –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
startApp()
]]
