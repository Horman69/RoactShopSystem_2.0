--!strict
-- src/services/SimpleSoundService.luau
-- ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð·Ð²ÑƒÐºÐ¾Ð² Ð´Ð»Ñ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° Ð¸ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÐµÐ¹
-- Ð’ÐµÑ€ÑÐ¸Ñ 2.1 Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¾Ð¹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹

local SoundService = game:GetService("SoundService")
local ContentProvider = game:GetService("ContentProvider")

local SimpleSoundService = {}
SimpleSoundService.__index = SimpleSoundService

-- ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð·Ð²ÑƒÐºÐ¾Ð²
local SOUND_CONFIG = {
	-- Ð—Ð²ÑƒÐºÐ¸ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°
	shop = {
		open = "rbxassetid://242135745",     -- ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°
		close = "rbxassetid://242135745",    -- Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°
		purchase = "rbxassetid://14621507602", -- ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° (ÐÐžÐ’Ð«Ð™ Ð—Ð’Ð£Ðš)
	},
	
	-- Ð—Ð²ÑƒÐºÐ¸ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÐµÐ¹
	abilities = {
		activate = "rbxassetid://119289373229825", -- ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸
		active = "rbxassetid://107261392908541",   -- Ð¡Ð¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ ÑÐ½Ð¾Ð²Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð° (Ð²ÑÐµÐ³Ð´Ð° Ñ‡ÐµÑ€ÐµÐ· 30 ÑÐµÐº) - ÐÐžÐ’Ð«Ð™ Ð—Ð’Ð£Ðš
		deactivate = "rbxassetid://17628141786",   -- Ð¡Ð¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ (Ñ‡ÐµÑ€ÐµÐ· 15 ÑÐµÐº)
		cooldown = "rbxassetid://104184340183231", -- ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÐºÑƒÐ»Ð´Ð°ÑƒÐ½Ð°
	},
	
	-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
	volume = 0.5,
	enabled = true,
	debug = true, -- Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
}

-- ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€
function SimpleSoundService.new()
	local self = setmetatable({}, SimpleSoundService)
	
	-- ÐšÑÑˆ Ð´Ð»Ñ Ð·Ð²ÑƒÐºÐ¾Ð² Ð¸ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
	self.preloadedSounds = {}
	self.soundPoolSize = {}
	self.performanceMetrics = {
		totalCalls = 0,
		averageLatency = 0,
		maxLatency = 0,
		cacheHits = 0,
		cacheMisses = 0,
	}
	
	-- ÐŸÑ€ÐµÐ´Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð²ÑÐµ Ð·Ð²ÑƒÐºÐ¸ Ð´Ð»Ñ ÑƒÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð´ÐµÑ€Ð¶ÐµÐº
	self:preloadAllSounds()
	
	-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÐ» Ð·Ð²ÑƒÐºÐ¾Ð² Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° (Ð´Ð»Ñ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ ÑƒÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð´ÐµÑ€Ð¶ÐµÐº)
	self:createSoundPools()
	
	return self
end

-- ÐŸÑ€ÐµÐ´Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð²ÑÐµÑ… Ð·Ð²ÑƒÐºÐ¾Ð² Ñ‡ÐµÑ€ÐµÐ· ContentProvider (Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ)
function SimpleSoundService:preloadAllSounds()
	local startTime = tick()
	local allSounds = {}
	local soundIds = {}
	
	-- Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð²ÑÐµ ID Ð·Ð²ÑƒÐºÐ¾Ð²
	for category, sounds in pairs(SOUND_CONFIG) do
		if type(sounds) == "table" and category ~= "volume" and category ~= "enabled" and category ~= "debug" then
			for soundType, soundId in pairs(sounds) do
				if type(soundId) == "string" and soundId ~= "" then
					table.insert(allSounds, soundId)
					table.insert(soundIds, soundId)
				end
			end
		end
	end
	
	-- ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜ Ð’ÐÐ–ÐÐž: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ContentProvider Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
	spawn(function()
		local success, err = pcall(function()
			ContentProvider:PreloadAsync(soundIds)
		end)
		
		if success then
			if SOUND_CONFIG.debug then
				print("ðŸ”Š SimpleSoundService: ContentProvider Ð¿Ñ€ÐµÐ´Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»", #soundIds, "Ð·Ð²ÑƒÐºÐ¾Ð² Ð·Ð°", math.round((tick() - startTime) * 1000), "Ð¼Ñ")
			end
		else
			warn("âš ï¸ SimpleSoundService: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€ÐµÐ´Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ContentProvider:", err)
		end
	end)
	
	-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Sound Ð´Ð»Ñ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
	for _, soundId in ipairs(allSounds) do
		local sound = Instance.new("Sound")
		sound.SoundId = soundId
		sound.Volume = 0 -- Ð‘ÐµÐ·Ð·Ð²ÑƒÑ‡Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°ÐµÐ¼
		sound.Parent = SoundService
		
		-- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ
		self.preloadedSounds[soundId] = sound
		self.soundPoolSize[soundId] = 1
	end
	
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾", #allSounds, "Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Sound Ð·Ð°", math.round((tick() - startTime) * 1000), "Ð¼Ñ")
	end
end

-- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿ÑƒÐ»Ð° Ð·Ð²ÑƒÐºÐ¾Ð² Ð´Ð»Ñ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°, Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÐµÐ¹)
function SimpleSoundService:createSoundPools()
	local criticalSounds = {
		SOUND_CONFIG.shop.purchase,
		SOUND_CONFIG.abilities.activate,
		SOUND_CONFIG.abilities.cooldown
	}
	
	-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð¾ 3 ÐºÐ¾Ð¿Ð¸Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð²ÑƒÐºÐ°
	for _, soundId in ipairs(criticalSounds) do
		if soundId and soundId ~= "" then
			for i = 2, 3 do -- Ð£Ð¶Ðµ ÐµÑÑ‚ÑŒ 1 ÐºÐ¾Ð¿Ð¸Ñ, ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ ÐµÑ‰Ðµ 2
				local sound = Instance.new("Sound")
				sound.SoundId = soundId
				sound.Volume = 0
				sound.Parent = SoundService
				
				-- Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð¿ÑƒÐ»
				local poolKey = soundId .. "_" .. i
				self.preloadedSounds[poolKey] = sound
				self.soundPoolSize[soundId] = (self.soundPoolSize[soundId] or 1) + 1
			end
		end
	end
	
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð¡Ð¾Ð·Ð´Ð°Ð½ Ð¿ÑƒÐ» Ð´Ð»Ñ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð·Ð²ÑƒÐºÐ¾Ð²")
	end
end

-- ÐœÐÐšÐ¡Ð˜ÐœÐÐ›Ð¬ÐÐž Ð‘Ð«Ð¡Ð¢Ð Ð«Ð™ Ð¼ÐµÑ‚Ð¾Ð´ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð·Ð²ÑƒÐºÐ° Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¾Ð¹
function SimpleSoundService:playSound(soundId: string, volume: number?)
	if not SOUND_CONFIG.enabled or not soundId or soundId == "" then
		return
	end
	
	local startTime = tick()
	self.performanceMetrics.totalCalls += 1
	
	-- Ð˜Ñ‰ÐµÐ¼ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ð¹ Ð·Ð²ÑƒÐº Ð² Ð¿ÑƒÐ»Ðµ
	local sound = nil
	local poolSize = self.soundPoolSize[soundId] or 1
	
	-- Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¸Ñ‰ÐµÐ¼ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð·Ð²ÑƒÐº
	local mainSound = self.preloadedSounds[soundId]
	if mainSound and not mainSound.IsPlaying then
		sound = mainSound
		self.performanceMetrics.cacheHits += 1
	else
		-- Ð˜Ñ‰ÐµÐ¼ Ð² Ð¿ÑƒÐ»Ðµ ÐºÐ¾Ð¿Ð¸Ð¹
		for i = 2, poolSize do
			local poolSound = self.preloadedSounds[soundId .. "_" .. i]
			if poolSound and not poolSound.IsPlaying then
				sound = poolSound
				self.performanceMetrics.cacheHits += 1
				break
			end
		end
		
		-- Ð•ÑÐ»Ð¸ Ð²ÑÐµ Ð·Ð²ÑƒÐºÐ¸ Ð·Ð°Ð½ÑÑ‚Ñ‹, ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ð¹ (Ñ€ÐµÐ´ÐºÐ¸Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹)
		if not sound then
			sound = Instance.new("Sound")
			sound.SoundId = soundId
			sound.Parent = SoundService
			self.performanceMetrics.cacheMisses += 1
			
			if SOUND_CONFIG.debug then
				warn("âš ï¸ SimpleSoundService: Ð¡Ð¾Ð·Ð´Ð°Ð½ Ð½Ð¾Ð²Ñ‹Ð¹ Ð·Ð²ÑƒÐº Ð´Ð»Ñ", soundId, "- Ð²ÑÐµ ÐºÐ¾Ð¿Ð¸Ð¸ Ð·Ð°Ð½ÑÑ‚Ñ‹")
			end
		end
	end
	
	-- ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼
	sound.Volume = volume or SOUND_CONFIG.volume
	sound:Play()
	
	-- Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
	local latency = (tick() - startTime) * 1000
	self.performanceMetrics.maxLatency = math.max(self.performanceMetrics.maxLatency, latency)
	self.performanceMetrics.averageLatency = (self.performanceMetrics.averageLatency + latency) / 2
	
	if SOUND_CONFIG.debug and latency > 1 then -- Ð›Ð¾Ð³Ð¸Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ¸ > 1Ð¼Ñ
		print("ðŸ”Š Ð—Ð²ÑƒÐº Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½ Ð·Ð°", math.round(latency * 100) / 100, "Ð¼Ñ | ID:", soundId)
	end
end

-- ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
function SimpleSoundService:getPerformanceStats()
	return {
		totalCalls = self.performanceMetrics.totalCalls,
		averageLatency = math.round(self.performanceMetrics.averageLatency * 100) / 100,
		maxLatency = math.round(self.performanceMetrics.maxLatency * 100) / 100,
		cacheHitRate = math.round((self.performanceMetrics.cacheHits / math.max(self.performanceMetrics.totalCalls, 1)) * 100),
		cacheMisses = self.performanceMetrics.cacheMisses,
	}
end

-- Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ (Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)
function SimpleSoundService:printStats()
	local stats = self:getPerformanceStats()
	print("ðŸ“Š SimpleSoundService Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°:")
	print("   Ð’ÑÐµÐ³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²:", stats.totalCalls)
	print("   Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ°:", stats.averageLatency, "Ð¼Ñ")
	print("   ÐœÐ°ÐºÑ. Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ°:", stats.maxLatency, "Ð¼Ñ")
	print("   ÐŸÐ¾Ð¿Ð°Ð´Ð°Ð½Ð¸Ñ Ð² ÐºÑÑˆ:", stats.cacheHitRate, "%")
	print("   ÐŸÑ€Ð¾Ð¼Ð°Ñ…Ð¸ ÐºÑÑˆÐ°:", stats.cacheMisses)
end

-- === Ð—Ð’Ð£ÐšÐ˜ ÐœÐÐ“ÐÐ—Ð˜ÐÐ ===
function SimpleSoundService:playShopOpen()
	self:playSound(SOUND_CONFIG.shop.open)
end

function SimpleSoundService:playShopClose()
	self:playSound(SOUND_CONFIG.shop.close)
end

function SimpleSoundService:playPurchaseSound()
	self:playSound(SOUND_CONFIG.shop.purchase)
end

-- === Ð—Ð’Ð£ÐšÐ˜ Ð¡ÐŸÐžÐ¡ÐžÐ‘ÐÐžÐ¡Ð¢Ð•Ð™ ===
function SimpleSoundService:playAbilityActivate()
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð·Ð²ÑƒÐº 'Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸' ID:", SOUND_CONFIG.abilities.activate)
	end
	self:playSound(SOUND_CONFIG.abilities.activate)
end

function SimpleSoundService:playAbilityActive()
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð·Ð²ÑƒÐº 'ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ ÑÐ½Ð¾Ð²Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°' ID:", SOUND_CONFIG.abilities.active)
	end
	self:playSound(SOUND_CONFIG.abilities.active)
end

function SimpleSoundService:playAbilityDeactivate()
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð·Ð²ÑƒÐº 'Ð´ÐµÐ°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸' ID:", SOUND_CONFIG.abilities.deactivate)
	end
	self:playSound(SOUND_CONFIG.abilities.deactivate)
end

function SimpleSoundService:playAbilityCooldown()
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð·Ð²ÑƒÐº 'ÐºÑƒÐ»Ð´Ð°ÑƒÐ½ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸' ID:", SOUND_CONFIG.abilities.cooldown)
	end
	self:playSound(SOUND_CONFIG.abilities.cooldown)
end

-- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
function SimpleSoundService:setEnabled(enabled: boolean)
	SOUND_CONFIG.enabled = enabled
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð—Ð²ÑƒÐºÐ¸", enabled and "Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹" or "Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹")
	end
end

function SimpleSoundService:setVolume(volume: number)
	SOUND_CONFIG.volume = math.clamp(volume, 0, 1)
	if SOUND_CONFIG.debug then
		print("ðŸ”Š SimpleSoundService: Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð½Ð°", SOUND_CONFIG.volume)
	end
end

function SimpleSoundService:setDebug(enabled: boolean)
	SOUND_CONFIG.debug = enabled
	print("ðŸ”Š SimpleSoundService: ÐžÑ‚Ð»Ð°Ð´ÐºÐ°", enabled and "Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°" or "Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°")
end

-- Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… Ð·Ð²ÑƒÐºÐ¾Ð² (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)
function SimpleSoundService:testAllSounds()
	print("ðŸ”Š Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… Ð·Ð²ÑƒÐºÐ¾Ð²...")
	
	local testSequence = {
		{sound = "shop.open", delay = 0.5, description = "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°"},
		{sound = "shop.purchase", delay = 0.5, description = "ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ñ‚Ð¾Ð²Ð°Ñ€Ð°"},
		{sound = "abilities.activate", delay = 0.5, description = "ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸"},
		{sound = "abilities.active", delay = 0.5, description = "Ð¡Ð¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ ÑÐ½Ð¾Ð²Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð° (30 ÑÐµÐº)"},
		{sound = "abilities.deactivate", delay = 0.5, description = "Ð”ÐµÐ°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸"},
		{sound = "abilities.cooldown", delay = 0.5, description = "ÐšÑƒÐ»Ð´Ð°ÑƒÐ½ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸"},
		{sound = "shop.close", delay = 0, description = "Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°"},
	}
	
	spawn(function()
		for i, test in ipairs(testSequence) do
			local parts = test.sound:split(".")
			local category, soundType = parts[1], parts[2]
			local soundId = SOUND_CONFIG[category] and SOUND_CONFIG[category][soundType]
			
			if soundId then
				print("   Ð¢ÐµÑÑ‚", i, "- Ð—Ð²ÑƒÐº:", test.description, "(ID:", soundId, ")")
				self:playSound(soundId, 0.3)
			else
				warn("   Ð¢ÐµÑÑ‚", i, "- Ð—Ð²ÑƒÐº Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½:", test.sound)
			end
			
			if test.delay > 0 then
				wait(test.delay)
			end
		end
		
		wait(1)
		self:printStats()
	end)
end

return SimpleSoundService