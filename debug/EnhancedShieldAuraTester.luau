--!strict
-- debug/EnhancedShieldAuraTester.luau
-- –¢–µ—Å—Ç–µ—Ä –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —É–ª—É—á—à–µ–Ω–Ω–æ–π –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–π –∞—É—Ä—ã —â–∏—Ç–∞

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local ModuleLoader = require(ReplicatedStorage:WaitForChild("shared"):WaitForChild("ModuleLoader"))

-- –§—É–Ω–∫—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
local function getShieldAuraService()
	local success, shieldService = pcall(function()
		return ModuleLoader.LoadModule("ShieldAuraService")
	end)
	
	if success and shieldService then
		return shieldService
	else
		warn("‚ö†Ô∏è EnhancedShieldAuraTester: –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å ShieldAuraService:", shieldService)
		return nil
	end
end

local EnhancedShieldAuraTester = {}

function EnhancedShieldAuraTester.runTests()
	print("üß™ === –¢–µ—Å—Ç–µ—Ä —É–ª—É—á—à–µ–Ω–Ω–æ–π –∞—É—Ä—ã —â–∏—Ç–∞ ===")
	print("üìã –ù–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:")
	print("   ‚Ä¢ –†–∞–∑–º–µ—Ä –∞—É—Ä—ã —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 12x12x12")
	print("   ‚Ä¢ –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: 0.85 (–æ—á–µ–Ω—å –¥–µ–ª–∏–∫–∞—Ç–Ω–∞—è)")
	print("   ‚Ä¢ –ê–º–ø–ª–∏—Ç—É–¥–∞ –ø—É–ª—å—Å–∞—Ü–∏–∏: 0.08 (–µ–¥–≤–∞ –∑–∞–º–µ—Ç–Ω–∞—è)")
	print("   ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏: 1.5 (–º–µ–¥–ª–µ–Ω–Ω–∞—è –∏ —Å–ø–æ–∫–æ–π–Ω–∞—è)")
	print("   ‚Ä¢ –Ø—Ä–∫–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è: 0.8 (–º—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ)")
	print("   ‚Ä¢ –†–∞–¥–∏—É—Å —Å–≤–µ—á–µ–Ω–∏—è: 16 (—à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)")
	print("   ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏: 0.82-0.95 (–≤—Å–µ–≥–¥–∞ –æ—á–µ–Ω—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ)")
	print("   ‚Ä¢ –ï—â–µ –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ")
	print("")
	
	local player = Players.LocalPlayer
	if not player then
		warn("‚ùå –ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω")
		return
	end
	
	local shieldService = getShieldAuraService()
	if not shieldService then
		warn("‚ùå ShieldAuraService –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
		return
	end
	
	print("üõ°Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–π –∞—É—Ä—ã —â–∏—Ç–∞...")
	print("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:")
	print("   [1] - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞—É—Ä—É –Ω–∞ 10 —Å–µ–∫")
	print("   [2] - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞—É—Ä—É –Ω–∞ 30 —Å–µ–∫ (–¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è)")
	print("   [3] - –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∞—É—Ä—ã")
	print("   [4] - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É")
	print("")
	
	-- –°—á–µ—Ç—á–∏–∫–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
	local stats = {
		auraCount = 0,
		activations = 0,
		totalDuration = 0
	}
	
	-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à
	local connection
	connection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if gameProcessed then return end
		
		if input.KeyCode == Enum.KeyCode.One then
			print("üü¢ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–π –∞—É—Ä—ã –Ω–∞ 10 —Å–µ–∫—É–Ω–¥...")
			shieldService:createShieldAura(player, "enhanced_test_shield_10", 10)
			stats.activations = stats.activations + 1
			stats.totalDuration = stats.totalDuration + 10
			
		elseif input.KeyCode == Enum.KeyCode.Two then
			print("üü¢ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–π –∞—É—Ä—ã –Ω–∞ 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è)...")
			shieldService:createShieldAura(player, "enhanced_test_shield_30", 30)
			stats.activations = stats.activations + 1
			stats.totalDuration = stats.totalDuration + 30
			
		elseif input.KeyCode == Enum.KeyCode.Three then
			print("üî¥ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∞—É—Ä...")
			shieldService:removeAllShieldAuras(player)
			
		elseif input.KeyCode == Enum.KeyCode.Four then
			print("üìä === –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ===")
			print("   –ê–∫—Ç–∏–≤–∞—Ü–∏–π:", stats.activations)
			print("   –û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:", stats.totalDuration, "—Å–µ–∫")
			print("   –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:", stats.activations > 0 and (stats.totalDuration / stats.activations) or 0, "—Å–µ–∫")
			print("")
			
		elseif input.KeyCode == Enum.KeyCode.Escape then
			print("üö™ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...")
			connection:Disconnect()
			shieldService:removeAllShieldAuras(player)
		end
	end)
	
	print("‚úÖ –¢–µ—Å—Ç–µ—Ä –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ [Esc] –¥–ª—è –≤—ã—Ö–æ–¥–∞")
	
	-- –ê–≤—Ç–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
	spawn(function()
		wait(2)
		print("üé¨ –ê–≤—Ç–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–ª–∏–∫–∞—Ç–Ω—É—é –∞—É—Ä—É –Ω–∞ 15 —Å–µ–∫—É–Ω–¥...")
		shieldService:createShieldAura(player, "auto_demo_enhanced", 15)
		stats.activations = stats.activations + 1
		stats.totalDuration = stats.totalDuration + 15
	end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function EnhancedShieldAuraTester.showComparison()
	print("üìä === –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞—É—Ä—ã ===")
	print("")
	print("–°–¢–ê–†–´–ï –ù–ê–°–¢–†–û–ô–ö–ò:")
	print("   –†–∞–∑–º–µ—Ä: 10x10x10")
	print("   –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: 0.8")
	print("   –ê–º–ø–ª–∏—Ç—É–¥–∞ –ø—É–ª—å—Å–∞—Ü–∏–∏: 0.15")
	print("   –°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏: 2")
	print("   –Ø—Ä–∫–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è: 1.2")
	print("   –î–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏: 0.75-0.95")
	print("")
	print("–ù–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò (–£–õ–£–ß–®–ï–ù–ù–´–ï):")
	print("   –†–∞–∑–º–µ—Ä: 12x12x12 (+20%)")
	print("   –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: 0.85 (+6% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏)")
	print("   –ê–º–ø–ª–∏—Ç—É–¥–∞ –ø—É–ª—å—Å–∞—Ü–∏–∏: 0.08 (-47% –Ω–∞–≤—è–∑—á–∏–≤–æ—Å—Ç–∏)")
	print("   –°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏: 1.5 (-25% –±—ã—Å—Ç—Ä–æ—Ç—ã)")
	print("   –Ø—Ä–∫–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è: 0.8 (-33% —è—Ä–∫–æ—Å—Ç–∏)")
	print("   –î–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏: 0.82-0.95 (–±–æ–ª–µ–µ —É–∑–∫–∏–π)")
	print("")
	print("–†–ï–ó–£–õ–¨–¢–ê–¢: –ê—É—Ä–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–π, –º–µ–Ω–µ–µ –Ω–∞–≤—è–∑—á–∏–≤–æ–π")
	print("–∏ –±–æ–ª–µ–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –Ω–∞ –≤–∏–¥!")
end

return EnhancedShieldAuraTester
